# 概述

对于今年全新的多人模式，平台与逻辑的对接方式与以往截然不同，本内容为迎合当前平台结构涉及的逻辑平台对接模式，希望学长别开喷，学弟别模仿。

# 模式

根据平台组的意思，本次平台模式大概是平台用C++建立一个模拟的python进程，利用相关接口黑箱式调用python的函数， 因此逻辑嵌在平台之内，逻辑要做的是对平台传来的数据进行处理并且传回平台所需的信息，因此逻辑不可能再像以往那样写主循环，循环由平台来写，逻辑仅作为一个模块提供回合刷新的方法。

由于逻辑是作为模块而非脚本，因此便利起见使用了全局变量来作为`GameMain`的实例。

# 接口函数

## game_init

无输入，作为平台启动后调用的第一个函数，用来生成航线并返回航线坐标。

## parachute

输入为选手信息以及他们选的着陆坐标，这个必须在所有选手选择后才能调用，数据包和解包交给平台负责，逻辑处理完信息后返回第一个回合的状态信息。

## game_main

输入信息为全部选手的指令（或者其他将来认为要用到的信息），逻辑首先调用`GameMain.unwrap_commands`解析指令，然后用`GameMain.refresh`处理并返回下一回合的状态信息，这是三个接口函数唯一一个要多次调用的函数。

# 对接细节

## 初始化

由于平台组目前（2018年10月26日）尚不清楚调用模块时全局变量的初始化会产生什么效果，暂且忽略这个问题，如果将来发现有bug那么将初始化置于`game_init`中。

## 文件路径

由于不同工作路径下的文件路径差异，我给所有文件路径设置了一个父路径值，具体的使用、调试等后期再说，现在暂且可以忽略这个问题。



## 变量表

此处给出了平台组需要实现的类、变量等内容，基本上也就是需要平台组呈递给选手的内容。

（但是现在暂时没空写，后面补坑）