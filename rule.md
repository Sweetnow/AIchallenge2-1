[TOC]

# 队式20

<!--游戏名未定，暂用队式20称呼游戏，后面定名字了直接全部替换即可，另外后面有未明确指出的待定内容都用这样的注释法写-->

## 总述

整个地图基于模仿吃鸡的模式，故事背景暂定，一些细节名字有待修正，本文档暂时(2018/8/3)只作概念、宏观上的规定。所有参赛队伍将同时被随机投放到地图各处，在地图上寻找装备、补给等，经过战斗直到只剩下一支队伍作为冠军。

本游戏采用细分像素的表示法，一个人物将是由多个像素表示成的近圆形，每个东西都应当由多个像素组成，地图大小为$m*n$（待定），但是整个地图不必作为数据进行传输，可以单处理局部地图数据。游戏将以帧作为回合界限（即调用玩家AI的频率），并以<!--每秒20帧（20fps）-->的速度进行。

## 指令

玩家的指令接口包括**移动**、**调整**、**攻击**、**整理**、**待命**、**拾取**、**无线电**。指令有**优先级**与**CD**，一个指令可能需要不止一帧的时间来完成，这个完成所用帧数即是CD值，<u>CD期间只有更高级的指令可以打断它</u>，优先级则是一个用来比较指令优先度的非负整数，<u>数值越大的指令优先级越高</u>，玩家需要分析局面，合理发送指令来博取优势、取得胜利。发送一次指令时，需要指明指令名、给定该指令的相关参数，以指令名为索引，无用参数将被无视，无效指令也将被无视，具体指令解释如下：

### 移动

- [ ] #### 简介

玩家的移动方向将由角度指令决定，**移动速度**指一次移动指令后若不被打断玩家移动的距离，**移动速度上限**与当前负重与**状态**有关，具体公式为<!--待填坑-->，玩家可以在允许范围内自行决定本次移动的速度。

- [ ] ####指令参数

1. 移动角度：一个`float`量，应当不小于**-180**且不超过**180**，计算方法是相对视野中心逆时针的角度
2. 移动速度：一个`int`量，应当不超过**移动速度上限**且不低于**移动速度下限**<!--（100）-->，当取值范围为空集时即不可移动

- [ ] #### 属性


- CD：
- 优先级：


### 调整

- [x] #### 简介

调整指调整玩家当前的**方向**与**状态**，后者分为**站立**、**蹲下**、**趴下**三种。站立为常规姿势，蹲下时根据地形玩家被命中的机率将下降，但同时移动速度也会下降，趴下时根据地形玩家被命中或发现的几率将下降，但同时无法移动。方向调整指玩家面向的方向，包含一个角度参数，计算方法与移动一样，使用缺省参数可以不改变方向/状态。

- [x] #### 指令参数
1. 状态：一个`int`（宏）量（`STATE_STAND/STATE_SQUAT/STATE_DOWN`），指代新的状态
2. 方向：一个`float`量，应当不小于**-180**且不超过**180**，计算方法是相对视野中心逆时针的角度

- [ ] #### 属性

- CD：
- 优先级：


### 攻击

- [x] #### 简介

发送攻击指令后将使用主武器朝指定方位进行攻击，攻击方式由武器决定。普通的武器只能指定攻击角度，特殊武器附带有一些独特参数，指定无法使用的参数将被无视（比如说使用手枪时指定攻击距离）。

- [x] #### 指令参数


1. 攻击角度：一个`float`量，取值范围为视野角度范围（即攻击视野角度之外区域必须先使用调整指令转身），计算方法是相对视野中心逆时针的角度
2. 攻击距离：一个`unsigned int`量，对于可以指定攻击距离的武器进行攻击距离指定，应当不超过武器的**射程**，超过则自动截取为最大距离（但依然是有效指令）
3. 攻击方式：一个`int`（宏）量，只对部分特殊武器生效，将在武器部分一一罗列。

- [ ] #### 属性

- CD：
- 优先级：


### 整理

- [x] #### 简介

该指令将用于整理玩家**装备**、**装备配件**、**道具**等，包括将一个装备配件转移到另一个装备上，将物品**丢弃**或**摧毁**，切换主武器，这些操作都由整理指令发出，指令将声明目标物品的ID，（可能用到的）另一个物品ID，行为。

- [ ] #### 指令参数


1. 物品1ID：一个`unsigned int`量，指明操作对象的物品ID
2. 物品2ID：一个`unsigned int`量，指明另一个操作对象（如果需要的话）的物品ID，缺省值为<!--待定-->
3. 行为：一个`int`（宏）量，分别为`TIDY_CHANGE`（改变配件位置）、`TIDY_EXCHANGE`（切换主武器）、`TIDY_DISCARD`（丢弃物品）、`TIDY_DISTROY`（摧毁物品）<!--待补充-->


- [ ] #### 属性

- CD：
- 优先级：

### 待命

- [x] #### 简介

待命是一个打断性指令，将试图中止一切可能中止的指令，恢复到站立状态，如果不指定角度将面朝原来的角度，或者制定角度以将视野中心改为目标方向。

- [x] #### 指令参数


3. 方向：一个`float`量，应当不小于**-180**且不超过**180**，计算方法是相对视野中心逆时针的角度，缺省值为0

- [ ] #### 属性

- CD：0
- 优先级：


### 拾取

- [x] ### 简介

当玩家感知范围内有可拾取的物品时，可以通过发送拾取指令来捡起目标物品，需要指定物品ID，并且由于不同物品可能支持拾取后以不同方式存储，因此还应指定**拾取方式**，拾取本身无CD，但是某些特定拾取方式可能会产生CD，这将在具体物品介绍部分列出。不合法的拾取指令将被无视，同一回合内不同玩家拾取同一物品将随即决定一个人拾取成功。

- [x] #### 指令参数


1. 物品ID：一个`unsigned int`量，指明操作对象的物品ID
2. 方式：一个`int`（宏）量，表明拾取时对物品做的一些操作，具体宏将在相应物品部分列出。

- [ ] #### 属性

- CD：0
- 优先级：


###无线电

- [ ] #### 简介

无线电指令是本游戏团队合作的精髓，无线电消息仅为一个字节，玩家将通过无线电给队友发送信息，并通过接收队友传来的信息进行决策与团队合作，内容所指定的含义由玩家队伍自行商议决策，本指令应指明接受消息的队友ID，消息，接受者将会得到信息内容、发送者的ID、坐标、以及**时延**。应注意发送无线电的过程是瞬间完成的，但是无线电将以<!--3000/帧-->的速度传播，因此到达接收者处将需要经历一定帧数，这个帧数称作时延。

- [x] #### 指令参数


1. 目标ID：一个`unsigned int`量，表示目标的ID。另外通信兵有额外参数，在通信兵处给出。
2. 消息：一个`unsigned char`量，作为发送的消息传出，消息所表示的意义需要玩家自行商议。

- [ ] #### 属性

- CD：0
- 优先级：



## 感知

## 物品

## 地形

## 英雄